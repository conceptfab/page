(()=>{const e=/\bTIMEFLOW\b/g,t=t=>String(t??"").replace(e,'<span class="tf-style">TIMEFLOW</span>'),n=(e,n)=>{e instanceof HTMLElement&&(e.innerHTML=t(n))},s=document.getElementById("year");s&&(s.textContent=String((new Date).getFullYear()));const o=document.querySelector(".topbar");if(o instanceof HTMLElement){const e=()=>{o.classList.toggle("is-scrolled",window.scrollY>12)};e(),window.addEventListener("scroll",e,{passive:!0})}const a=document.querySelector("[data-menu-toggle]"),r=document.querySelector(".topnav");if(o instanceof HTMLElement&&a instanceof HTMLButtonElement&&r instanceof HTMLElement){const e=window.matchMedia("(max-width: 960px)");let t=!1;const n=()=>{o.classList.toggle("has-mobile-menu",e.matches),!e.matches&&t&&s(!1)},s=e=>{t=Boolean(e),o.classList.toggle("is-menu-open",t),a.setAttribute("aria-expanded",String(t)),a.setAttribute("aria-label",t?"Close menu":"Open menu")};a.addEventListener("click",()=>{e.matches&&s(!t)}),r.addEventListener("click",t=>{if(!e.matches)return;const n=t.target;n instanceof Element&&n.closest("a")&&s(!1)}),document.addEventListener("keydown",e=>{"Escape"===e.key&&t&&(s(!1),a.focus())}),document.addEventListener("click",n=>{if(!e.matches||!t)return;const a=n.target;a instanceof Node&&(o.contains(a)||s(!1))}),n(),"function"==typeof e.addEventListener?e.addEventListener("change",n):"function"==typeof e.addListener&&e.addListener(n)}const i=Array.from(document.querySelectorAll("[data-reveal]"));for(const e of i){const t=Number(e.getAttribute("data-delay")||"0");e.style.setProperty("--reveal-delay",String(t))}if("IntersectionObserver"in window){const e=new IntersectionObserver((e,t)=>{for(const n of e)n.isIntersecting&&(n.target.classList.add("is-visible"),t.unobserve(n.target))},{threshold:.14,rootMargin:"0px 0px -30px 0px"});i.forEach(t=>e.observe(t))}else i.forEach(e=>e.classList.add("is-visible"));const c=document.getElementById("heroRoleRotator"),l=["designers","UI/UX designers","motion designers","dev freelancers","small studios"];let d=0;c&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches&&window.setInterval(()=>{d=(d+1)%l.length,c.textContent=l[d]},2400);const u=Array.from(document.querySelectorAll("[data-counter]")),m=e=>{const t=Number(e.getAttribute("data-counter")||"0"),n=Number(e.textContent||"0");if(!Number.isFinite(t))return;if(Number.isFinite(n)&&n===t)return void(e.textContent=String(t));const s=performance.now(),o=a=>{const r=Math.min(1,(a-s)/1200),i=1-Math.pow(1-r,3),c=Number.isFinite(n)?n:0;e.textContent=String(Math.round(c+(t-c)*i)),r<1&&requestAnimationFrame(o)};requestAnimationFrame(o)};if(u.length)if("IntersectionObserver"in window){const e=new IntersectionObserver((e,t)=>{for(const n of e){if(!n.isIntersecting)continue;n.target.querySelectorAll("[data-counter]").forEach(e=>{"1"!==e.dataset.animated&&(e.dataset.animated="1",m(e))}),t.unobserve(n.target)}},{threshold:.5});document.querySelectorAll("[data-counter-card]").forEach(t=>e.observe(t))}else u.forEach(e=>m(e));Array.from(document.querySelectorAll("[data-shot-card]")).forEach(e=>{const t=e.querySelector(".shot-image");if(!(t instanceof HTMLImageElement))return;const n=()=>{e.classList.add("is-loaded"),e.classList.remove("is-missing")},s=()=>{e.classList.add("is-missing"),e.classList.remove("is-loaded")};t.addEventListener("load",n,{once:!0}),t.addEventListener("error",s,{once:!0}),t.complete&&(t.naturalWidth>0&&t.naturalHeight>0?n():s())});const h=document.querySelector("[data-hero-slider]"),g=document.querySelector("[data-hero-slider-stage]"),f=document.getElementById("heroShotImage"),b=document.getElementById("heroShotCaptionLabel"),y=document.getElementById("heroShotCaptionMeta"),p=document.getElementById("heroHeadline"),E=document.getElementById("heroLead"),v=document.getElementById("showcaseHeadline"),L=document.getElementById("showcaseNote"),w=document.querySelector("[data-hero-slider-prev]"),T=document.querySelector("[data-hero-slider-next]"),A=document.querySelector("[data-hero-slider-dots]"),S=document.querySelector("[data-hero-slider-counter]");if(h&&g instanceof HTMLElement&&f instanceof HTMLImageElement&&b&&y&&p&&E&&v&&L&&A){const e=Array.from(document.querySelectorAll(".shot-rail [data-hero-slide-source]")),t=e=>{const t=e.querySelector(".shot-caption span"),n=e.querySelector(".shot-caption em"),s=e.querySelector(".shot-image");return{label:t?t.textContent.trim():"",meta:n?n.textContent.trim():"",src:s instanceof HTMLImageElement&&s.getAttribute("src")||"",alt:s instanceof HTMLImageElement&&s.getAttribute("alt")||""}},s=e.map(t).filter(e=>e.src),o={Dashboard:{heroTitle:"Stay on top of your work time",heroAccent:"without breaking flow.",heroLead:"TIMEFLOW automatically collects data, organizes sessions and helps you assign time to projects. Today: tracking + analytics + AI suggestions + import/export + online sync. Coming next: a full project manager with a custom folder tree.",showcaseTitle:"Dashboard, projects, sessions and analytics in one workflow",showcaseNote:"The main view shows your work dashboard. Below are the key modules that build a freelancer's daily workflow: Projects, Sessions, Analysis, Estimates and AI."},Projects:{heroTitle:"Organize your projects",heroAccent:"and folders without the chaos.",heroLead:"Build your client and project structure, assign apps, sessions and statuses. TIMEFLOW helps you go from raw tracking to real order.",showcaseTitle:"Projects: folders, statuses and quick assignments",showcaseNote:"The Projects view organizes your work structure. Build your tree, set statuses and map sessions to projects faster."},Sessions:{heroTitle:"Clean up and assign sessions",heroAccent:"in seconds.",heroLead:"Session grouping, quick corrections and AI suggestions cut down the time you spend sorting through your day. Less clicking, more actual work.",showcaseTitle:"Sessions: daily sessions, grouping and assignments",showcaseNote:"See raw entries and organize them into a project workflow. TIMEFLOW supports manual corrections and assignment suggestions based on your work history."},"Time Analysis":{heroTitle:"See where your time goes",heroAccent:"and when you hit peak flow.",heroLead:"Charts and a heatmap help you spot repeating work patterns. That makes it easier to plan focus blocks, quotes and realistic deadlines.",showcaseTitle:"Time Analysis: charts, heatmap and work patterns",showcaseNote:"Analytics shows not just hour totals but also the rhythm of your day and week. That helps you make better decisions about planning and pricing."},Estimates:{heroTitle:"Quote from actual data,",heroAccent:"not gut feeling.",heroLead:"The Estimates module connects real work time with rates and multipliers. Build consistent quotes faster and keep a better eye on project profitability.",showcaseTitle:"Estimates: rates, multipliers and project quotes",showcaseNote:"Quotes are based on real time, not just intuition. That helps you keep your offers consistent and have better conversations with clients about scope."},"AI & Model":{heroTitle:"AI suggests assignments.",heroAccent:"You stay in control.",heroLead:"suggest and auto_safe modes help automate assignments without losing control of your data. Train the model and roll back the last batch of changes any time.",showcaseTitle:"AI & Model: suggestions, thresholds and model training",showcaseNote:"The AI panel shows work modes, confidence thresholds and model status. An automation layer built to speed up your workflow, not complicate it."}};if(s.length){const t=window.matchMedia("(prefers-reduced-motion: reduce)").matches;let a=0;const r=[],i=()=>{g.classList.add("is-loaded"),g.classList.remove("is-missing")},c=()=>{g.classList.add("is-missing"),g.classList.remove("is-loaded")};f.addEventListener("load",i),f.addEventListener("error",c);const l=e=>{const t=o[e.label]||o.Dashboard;p.innerHTML=`${t.heroTitle} <span>${t.heroAccent}</span>`,n(E,t.heroLead),n(v,t.showcaseTitle),n(L,t.showcaseNote)},d=e=>{b.textContent=e.label||"",y.textContent=e.meta||"";(f.getAttribute("src")||"")!==e.src&&(g.classList.remove("is-loaded","is-missing"),f.setAttribute("src",e.src)),f.setAttribute("alt",e.alt||e.label||"TIMEFLOW screenshot"),f.complete&&(f.naturalWidth>0&&f.naturalHeight>0?i():c())},u=(e,t)=>{if(!(e instanceof HTMLElement&&t))return;const n=e.querySelector(".shot-caption span"),s=e.querySelector(".shot-caption em"),o=e.querySelector(".shot-image");if(n&&(n.textContent=t.label||""),s&&(s.textContent=t.meta||""),o instanceof HTMLImageElement){(o.getAttribute("src")||"")!==t.src&&(e.classList.remove("is-loaded","is-missing"),o.setAttribute("src",t.src)),o.setAttribute("alt",t.alt||t.label||"TIMEFLOW screenshot"),o.complete&&(o.naturalWidth>0&&o.naturalHeight>0?(e.classList.add("is-loaded"),e.classList.remove("is-missing")):(e.classList.add("is-missing"),e.classList.remove("is-loaded")))}},m=()=>{e.forEach((e,t)=>{if(!(e instanceof HTMLElement))return;const n=s[t];if(!n)return e.hidden=!0,void e.removeAttribute("data-slide-index");e.hidden=!1,e.dataset.slideIndex=String(t);const o=t===a;e.classList.toggle("is-active",o),e.setAttribute("aria-pressed",String(o)),e.setAttribute("aria-label",`Show screen: ${n.label||"view"}`),u(e,n)})},k=()=>{r.forEach((e,t)=>{const n=t===a;e.classList.toggle("is-active",n),e.setAttribute("aria-current",n?"true":"false")})},I=()=>{S&&(S.textContent=`${a+1} / ${s.length}`)},M=()=>{if(a<0)return;const n=e[a];n instanceof HTMLElement&&n.scrollIntoView({block:"nearest",inline:"center",behavior:t?"auto":"smooth"})},x=(e,t={})=>{const n=!1!==t.scrollThumb,q=a;a=(e%s.length+s.length)%s.length;const o=s[a];if(!o)return;const F=!1===t.scrollThumb&&0===q,G=q===a,H=document.querySelector(".hero-copy");if(window.matchMedia("(prefers-reduced-motion: reduce)").matches||F||G){d(o),l(o),m(),k(),I(),n&&M();return}g.classList.add("is-transitioning"),g.classList.remove("is-entering"),H&&H.classList.add("is-copy-transitioning"),m(),k(),I(),n&&M(),setTimeout(()=>{d(o),l(o),g.classList.remove("is-transitioning"),g.classList.add("is-entering"),H&&(H.classList.remove("is-copy-transitioning"),H.classList.add("is-copy-entering"));const e=()=>{g.classList.remove("is-entering"),g.removeEventListener("animationend",e)};g.addEventListener("animationend",e),H&&setTimeout(()=>H.classList.remove("is-copy-entering"),350)},300)};e.forEach((e,t)=>{e instanceof HTMLElement&&(e.setAttribute("role","button"),e.setAttribute("tabindex","0"),e.addEventListener("click",()=>{const t=Number.parseInt(e.dataset.slideIndex||"",10);Number.isNaN(t)||x(t)}),e.addEventListener("keydown",t=>{if("Enter"!==t.key&&" "!==t.key)return;t.preventDefault();const n=Number.parseInt(e.dataset.slideIndex||"",10);Number.isNaN(n)||x(n)}))}),s.forEach((e,t)=>{const n=document.createElement("button");n.type="button",n.className="showcase-dot",n.setAttribute("aria-label",`Show screen: ${e.label}`),n.title=e.label,n.addEventListener("click",()=>x(t)),A.appendChild(n),r.push(n)}),w instanceof HTMLButtonElement&&w.addEventListener("click",()=>x(a-1)),T instanceof HTMLButtonElement&&T.addEventListener("click",()=>x(a+1)),h.addEventListener("keydown",e=>{"ArrowLeft"===e.key&&(e.preventDefault(),x(a-1)),"ArrowRight"===e.key&&(e.preventDefault(),x(a+1))}),x(0,{scrollThumb:!1})}}const k=document.getElementById("betaForm"),I=document.getElementById("betaFormFeedback");if(k&&k instanceof HTMLFormElement){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,t=["name","email","role","consent"].map(e=>k.elements.namedItem(e)).filter(e=>e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement),n={name:"Please enter your name or handle.",email:"Please enter a valid email address.",role:"Please choose your industry.",consent:"Please confirm consent to contact you about beta testing."},s=e=>e.name?k.querySelector(`[data-field-error-for="${e.name}"]`):null,o=(e,t,n)=>{if(!(t instanceof HTMLElement&&t.id))return;const s=(e.getAttribute("aria-describedby")||"").split(/\s+/).filter(Boolean),o=new Set(s);n&&o.add(t.id),n||o.delete(t.id),o.size?e.setAttribute("aria-describedby",Array.from(o).join(" ")):e.removeAttribute("aria-describedby")},a=e=>{const t=s(e);e.removeAttribute("aria-invalid");const n=e.closest("label");n&&n.classList.remove("has-error"),t instanceof HTMLElement&&(t.textContent="",o(e,t,!1))},r=(e,t)=>{const n=s(e);e.setAttribute("aria-invalid","true");const a=e.closest("label");a&&a.classList.add("has-error"),n instanceof HTMLElement&&(n.textContent=t,o(e,n,!0))},i=t=>{a(t);const s=t.name;if("name"===s)return!!String(t.value||"").trim()||(r(t,n.name),!1);if("email"===s){const s=String(t.value||"").trim();return!!e.test(s)||(r(t,n.email),!1)}return"role"===s?!!String(t.value||"").trim()||(r(t,n.role),!1):!("consent"===s&&t instanceof HTMLInputElement)||(!!t.checked||(r(t,n.consent),!1))},c=()=>{let e=null;return t.forEach(t=>{i(t)||e||(e=t)}),{ok:!e,firstInvalid:e}};t.forEach(e=>{const t=()=>{((e instanceof HTMLInputElement&&"checkbox"===e.type?e.checked:String(e.value||"").trim().length>0)||"true"===e.getAttribute("aria-invalid"))&&i(e)};e.addEventListener("blur",t),e.addEventListener("change",t),e instanceof HTMLInputElement&&"checkbox"===e.type||e.addEventListener("input",t)}),I instanceof HTMLElement&&I.setAttribute("tabindex","-1"),k.addEventListener("submit",async e=>{if(e.preventDefault(),!(I instanceof HTMLElement))return;I.classList.remove("is-error","is-success"),I.textContent="";const n=c();if(!n.ok)return I.textContent="Please fix the highlighted fields and try again.",I.classList.add("is-error"),void(n.firstInvalid instanceof HTMLElement&&n.firstInvalid.focus());const s=new FormData(k),o=k.querySelector('button[type="submit"]'),r=o?o.textContent:"";k.setAttribute("aria-busy","true"),o instanceof HTMLButtonElement&&(o.disabled=!0,o.textContent="Sendingâ€¦");try{s.set("source","timeflow_landing_en"),s.set("submitted_at_iso",(new Date).toISOString());const e=await fetch(k.action||"../form-handler.php",{method:"POST",body:s,headers:{Accept:"application/json"}});let n=null;try{n=await e.json()}catch{n=null}if(!e.ok||!n||!0!==n.ok)throw new Error(n&&"string"==typeof n.message&&n.message||"Failed to submit the form.");I.textContent=n.message||"Thank you. Your application has been saved.",I.classList.add("is-success"),k.reset(),t.forEach(e=>a(e)),I.focus({preventScroll:!0})}catch(e){I.textContent=e instanceof Error&&e.message?e.message:"Connection error. Please try again in a moment.",I.classList.add("is-error")}finally{k.removeAttribute("aria-busy"),o instanceof HTMLButtonElement&&(o.disabled=!1,o.textContent=r||"Submit application")}})}(window.requestIdleCallback||requestAnimationFrame)(()=>(e=>{if(!(e instanceof Node))return;const n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT),s=[];for(let e=n.nextNode();e;e=n.nextNode()){if(!(e instanceof Text))continue;if(!e.nodeValue||!e.nodeValue.includes("TIMEFLOW"))continue;const n=e.parentElement;if(!n)continue;if(n.closest(".tf-style"))continue;if(n.closest("script, style, noscript, textarea, option"))continue;const o=e.nodeValue,a=t(o);a!==o&&s.push({node:e,html:a})}for(const{node:e,html:t}of s){const n=document.createElement("template");n.innerHTML=t,e.replaceWith(n.content)}})(document.body));const M=(...e)=>{"function"==typeof gtag&&gtag(...e)};k&&k.addEventListener("submit",()=>{const e=k.elements.namedItem("role");M("event","generate_lead",{event_category:"beta_signup",event_label:e instanceof HTMLSelectElement&&e.value||"unknown"})}),document.querySelectorAll('a[href="#beta"]').forEach(e=>{e.addEventListener("click",()=>{M("event","click_cta_beta",{event_category:"engagement",event_label:e.textContent.trim()})})}),document.querySelectorAll(".faq-item").forEach(e=>{e.addEventListener("toggle",()=>{if(e instanceof HTMLDetailsElement&&e.open){const t=e.querySelector("summary");M("event","faq_expand",{event_category:"engagement",event_label:t?t.textContent.trim().slice(0,80):""})}})}),document.querySelectorAll(".lang-link").forEach(e=>{e.addEventListener("click",()=>{M("event","language_switch",{event_category:"engagement",event_label:e.getAttribute("hreflang")||e.textContent.trim()})})});const x=new Set;window.addEventListener("scroll",()=>{const e=Math.round((window.scrollY+window.innerHeight)/document.documentElement.scrollHeight*100);[25,50,75,100].forEach(t=>{e>=t&&!x.has(t)&&(x.add(t),M("event","scroll_depth",{event_category:"engagement",event_label:t+"%",value:t}))})},{passive:!0});const H=document.querySelectorAll("section[id]");if(H.length&&"IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(M("event","section_view",{event_category:"engagement",event_label:t.target.id}),e.unobserve(t.target))})},{threshold:.3});H.forEach(t=>e.observe(t))}})();