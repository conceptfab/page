(()=>{const e=/\bTIMEFLOW\b/g,t="en"===document.documentElement.lang?"en":"pl",n={pl:{menuOpen:"Otwórz menu",menuClose:"Zamknij menu",showScreen:"Pokaż screen",roles:["grafików","UI/UX designerów","motion designerów","freelancerów dev","małych studiów"],fieldMessages:{name:"Podaj imię lub nick.",email:"Podaj poprawny adres e-mail.",role:"Wybierz branżę.",consent:"Zaznacz zgodę na kontakt w sprawie testów beta."},formError:"Popraw oznaczone pola i spróbuj ponownie.",formSending:"Wysyłanie…",formSuccess:"Dziękujemy. Zgłoszenie zostało zapisane.",formConnError:"Błąd połączenia. Spróbuj ponownie za chwilę.",imgAlt:"Zrzut ekranu TIMEFLOW"},en:{menuOpen:"Open menu",menuClose:"Close menu",showScreen:"Show screen",roles:["designers","UI/UX designers","motion designers","dev freelancers","small studios"],fieldMessages:{name:"Please Provide your name or nick.",email:"Please provide a valid email address.",role:"Please choose your industry.",consent:"Please check the consent to contact regarding beta tests."},formError:"Please correct the marked fields and try again.",formSending:"Sending…",formSuccess:"Thank you. Your application has been saved.",formConnError:"Connection error. Please try again in a moment.",imgAlt:"TIMEFLOW screenshot"}}[t],s=t=>String(t??"").replace(e,'<span class="tf-style">TIMEFLOW</span>'),o=(e,t)=>{e instanceof HTMLElement&&(e.innerHTML=s(t))},a=document.getElementById("year");a&&(a.textContent=String((new Date).getFullYear()));const r=document.querySelector(".topbar");if(r instanceof HTMLElement){const e=()=>{r.classList.toggle("is-scrolled",window.scrollY>12)};e(),window.addEventListener("scroll",e,{passive:!0})}const i=document.querySelector("[data-menu-toggle]"),c=document.querySelector(".topnav");if(r instanceof HTMLElement&&i instanceof HTMLButtonElement&&c instanceof HTMLElement){const e=window.matchMedia("(max-width: 960px)");let t=!1;const s=()=>{r.classList.toggle("has-mobile-menu",e.matches),!e.matches&&t&&o(!1)},o=e=>{t=Boolean(e),r.classList.toggle("is-menu-open",t),i.setAttribute("aria-expanded",String(t)),i.setAttribute("aria-label",t?n.menuClose:n.menuOpen)};i.addEventListener("click",()=>{e.matches&&o(!t)}),c.addEventListener("click",t=>{if(!e.matches)return;const n=t.target;n instanceof Element&&n.closest("a")&&o(!1)}),document.addEventListener("keydown",e=>{"Escape"===e.key&&t&&(o(!1),i.focus())}),document.addEventListener("click",n=>{if(!e.matches||!t)return;const s=n.target;s instanceof Node&&(r.contains(s)||o(!1))}),s(),"function"==typeof e.addEventListener?e.addEventListener("change",s):"function"==typeof e.addListener&&e.addListener(s)}const l=Array.from(document.querySelectorAll("[data-reveal]"));for(const e of l){const t=Number(e.getAttribute("data-delay")||"0");e.style.setProperty("--reveal-delay",String(t))}if("IntersectionObserver"in window){const e=new IntersectionObserver((e,t)=>{for(const n of e)n.isIntersecting&&(n.target.classList.add("is-visible"),t.unobserve(n.target))},{threshold:.14,rootMargin:"0px 0px -30px 0px"});l.forEach(t=>e.observe(t))}else l.forEach(e=>e.classList.add("is-visible"));const d=document.getElementById("heroRoleRotator"),u=n.roles;let m=0;d&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches&&window.setInterval(()=>{m=(m+1)%u.length,d.textContent=u[m]},2400);const h=Array.from(document.querySelectorAll("[data-counter]")),g=e=>{const t=Number(e.getAttribute("data-counter")||"0"),n=Number(e.textContent||"0");if(!Number.isFinite(t))return;if(Number.isFinite(n)&&n===t)return void(e.textContent=String(t));const s=performance.now(),o=a=>{const r=Math.min(1,(a-s)/1200),i=1-Math.pow(1-r,3),c=Number.isFinite(n)?n:0;e.textContent=String(Math.round(c+(t-c)*i)),r<1&&requestAnimationFrame(o)};requestAnimationFrame(o)};if(h.length)if("IntersectionObserver"in window){const e=new IntersectionObserver((e,t)=>{for(const n of e){if(!n.isIntersecting)continue;n.target.querySelectorAll("[data-counter]").forEach(e=>{"1"!==e.dataset.animated&&(e.dataset.animated="1",g(e))}),t.unobserve(n.target)}},{threshold:.5});document.querySelectorAll("[data-counter-card]").forEach(t=>e.observe(t))}else h.forEach(e=>g(e));Array.from(document.querySelectorAll("[data-shot-card]")).forEach(e=>{const t=e.querySelector(".shot-image");if(!(t instanceof HTMLImageElement))return;const n=()=>{e.classList.add("is-loaded"),e.classList.remove("is-missing")},s=()=>{e.classList.add("is-missing"),e.classList.remove("is-loaded")};t.addEventListener("load",n,{once:!0}),t.addEventListener("error",s,{once:!0}),t.complete&&(t.naturalWidth>0&&t.naturalHeight>0?n():s())});const p=document.querySelector("[data-hero-slider]"),y=document.querySelector("[data-hero-slider-stage]"),f=document.getElementById("heroShotImage"),w=document.getElementById("heroShotCaptionLabel"),b=document.getElementById("heroShotCaptionMeta"),k=document.getElementById("heroHeadline"),L=document.getElementById("heroLead"),E=document.getElementById("showcaseHeadline"),v=document.getElementById("showcaseNote"),z=document.querySelector("[data-hero-slider-prev]"),T=document.querySelector("[data-hero-slider-next]"),A=document.querySelector("[data-hero-slider-dots]"),j=document.querySelector("[data-hero-slider-counter]");if(p&&y instanceof HTMLElement&&f instanceof HTMLImageElement&&w&&b&&k&&L&&E&&v&&A){const e=Array.from(document.querySelectorAll(".shot-rail [data-hero-slide-source]")),s=e=>{const t=e.querySelector(".shot-caption span"),n=e.querySelector(".shot-caption em"),s=e.querySelector(".shot-image");return{label:t?t.textContent.trim():"",meta:n?n.textContent.trim():"",src:s instanceof HTMLImageElement&&s.getAttribute("src")||"",srcset:s instanceof HTMLImageElement&&s.getAttribute("srcset")||"",alt:s instanceof HTMLImageElement&&s.getAttribute("alt")||""}},a=e.map(s).filter(e=>e.src),r="en"===t?{Dashboard:{heroTitle:"Control your work time",heroAccent:"without killing the flow.",heroLead:"TIMEFLOW automatically collects data, organizes sessions and helps assign time to projects. Today: tracking + analytics + AI suggestions + import/export + sync MVP. Tomorrow: full project manager with custom folder tree.",showcaseTitle:"Dashboard, projects, sessions and analytics in one workflow",showcaseNote:"The main view shows the work dashboard. Below are the key modules that build a freelancer's daily workflow: Projects, Sessions, Analysis, Estimates and AI."},Projects:{heroTitle:"Organize projects",heroAccent:"and folders without chaos.",heroLead:"Build a structure for clients and projects, assign apps, sessions and statuses. TIMEFLOW helps move from raw tracking to real order of work.",showcaseTitle:"Projects: folders, statuses and quick assignments",showcaseNote:"The Projects view organizes the workflow of a freelancer and studio. You can build a tree, mark statuses and faster map sessions to projects."},Sessions:{heroTitle:"Clean and assign sessions",heroAccent:"in seconds.",heroLead:"Grouping sessions, quick corrections and AI suggestions shorten the manual organizational time of your workday. Less clicking, more real work.",showcaseTitle:"Sessions: daily sessions, grouping and assignments",showcaseNote:"See raw entries and organize them into project workflow. TIMEFLOW supports manual corrections and assignment suggestions based on work history."},"Time Analysis":{heroTitle:"See where your time goes",heroAccent:"and when you peak flow.",heroLead:"Charts and heatmaps help you find repeatable work patterns. This makes it easier to plan focus blocks, estimates and real deadlines.",showcaseTitle:"Time Analysis: charts, heatmap and work patterns",showcaseNote:"Analytics shows not just total hours, but also the rhythm of the day and week. This helps you make better decisions about planning and estimates."},Estimates:{heroTitle:"Estimate based on data",heroAccent:"instead of guessing.",heroLead:"Estimates module connects real work time with rates and multipliers. You create consistent estimates faster and take better care of project profitability.",showcaseTitle:"Estimates: rates, multipliers and project valuations",showcaseNote:"Valuations are based on actual time, not just intuition. This helps maintain offer consistency and better conversations with clients about project scope."},"AI & Model":{heroTitle:"AI suggests assignments",heroAccent:"You keep control.",heroLead:"Suggest and auto_safe modes help automate assignments without losing control over data. You can train the model and rollback latest batch of changes.",showcaseTitle:"AI & Model: suggestions, thresholds and model training",showcaseNote:"AI panel shows working modes, confidence thresholds and model status. It's an automation layer designed to speed up workflow, not complicate it."}}:{Dashboard:{heroTitle:"Kontroluj czas pracy",heroAccent:"bez zabijania flow.",heroLead:"TIMEFLOW automatycznie zbiera dane, porządkuje sesje i pomaga przypisać czas do projektów. Dziś: tracking + analityka + AI sugestie + import/export + sync MVP. Jutro: pełny menedżer projektów z customowym drzewem folderów.",showcaseTitle:"Dashboard, projekty, sesje i analityka w jednym workflow",showcaseNote:"Główny widok pokazuje dashboard pracy. Poniżej najważniejsze moduły, które budują codzienny workflow freelancera: Projects, Sessions, Analysis, Estimates i AI."},Projects:{heroTitle:"Uporządkuj projekty",heroAccent:"i foldery bez chaosu.",heroLead:"Buduj strukturę klientów i projektów, przypisuj aplikacje, sesje i statusy. TIMEFLOW pomaga przejść od surowego trackingu do realnego porządku pracy.",showcaseTitle:"Projects: foldery, statusy i szybkie przypisania",showcaseNote:"Widok Projects porządkuje strukturę pracy freelancera i studia. Możesz budować drzewo, oznaczać statusy oraz szybciej mapować sesje do projektów."},Sessions:{heroTitle:"Czyść i przypisuj sesje",heroAccent:"w kilka sekund.",heroLead:"Grupowanie sesji, szybkie korekty i sugestie AI skracają czas ręcznego porządkowania dnia pracy. Mniej klikania, więcej realnej pracy.",showcaseTitle:"Sessions: dzienne sesje, grupowanie i przypisania",showcaseNote:"Zobacz surowe wpisy i uporządkuj je w workflow projektowy. TIMEFLOW wspiera ręczne poprawki oraz sugestie przypisań na podstawie historii pracy."},"Time Analysis":{heroTitle:"Zobacz gdzie znika czas",heroAccent:"i kiedy masz peak flow.",heroLead:"Wykresy i heatmapa pomagają znaleźć powtarzalne wzorce pracy. Dzięki temu łatwiej planować bloki fokusowe, wyceny i realne deadline'y.",showcaseTitle:"Time Analysis: wykresy, heatmapa i wzorce pracy",showcaseNote:"Analityka pokazuje nie tylko sumy godzin, ale też rytm dnia i tygodnia. To pomaga podejmować lepsze decyzje o planowaniu i wycenie."},Estimates:{heroTitle:"Wyceniaj na podstawie danych",heroAccent:"zamiast zgadywać.",heroLead:"Moduł Estimates łączy realny czas pracy ze stawkami i mnożnikami. Szybciej tworzysz spójne wyceny i lepiej pilnujesz rentowności projektów.",showcaseTitle:"Estimates: stawki, mnożniki i wyceny projektów",showcaseNote:"Wyceny bazują na rzeczywistym czasie, nie tylko intuicji. To pomaga utrzymać spójność ofert i lepiej rozmawiać z klientem o zakresie pracy."},"AI & Model":{heroTitle:"AI sugeruje przypisania",heroAccent:"Ty zachowujesz kontrolę.",heroLead:"Tryby suggest i auto_safe pomagają automatyzować przypisania bez utraty kontroli nad danymi. Możesz trenować model i cofnąć ostatnią paczkę zmian.",showcaseTitle:"AI & Model: sugestie, progi i trening modelu",showcaseNote:"Panel AI pokazuje tryby pracy, progi pewności i status modelu. To warstwa automatyzacji, która ma przyspieszać workflow, a nie go komplikować."}};if(a.length){const t=window.matchMedia("(prefers-reduced-motion: reduce)").matches;let s=0,i=0;const c=[],l=()=>{y.classList.add("is-loaded"),y.classList.remove("is-missing")},d=()=>{y.classList.add("is-missing"),y.classList.remove("is-loaded")};f.addEventListener("load",l),f.addEventListener("error",d);const u=e=>{const t=r[e.label]||r.Dashboard;k.innerHTML=`${t.heroTitle} <span>${t.heroAccent}</span>`,o(L,t.heroLead),o(E,t.showcaseTitle),o(v,t.showcaseNote)},m=e=>{w.textContent=e.label||"",b.textContent=e.meta||"";const t=f.getAttribute("src")||"",s=f.getAttribute("srcset")||"";t===e.src&&s===e.srcset||(y.classList.remove("is-loaded","is-missing"),f.setAttribute("src",e.src),e.srcset?f.setAttribute("srcset",e.srcset):f.removeAttribute("srcset")),f.setAttribute("alt",e.alt||e.label||n.imgAlt),f.complete&&(f.naturalWidth>0&&f.naturalHeight>0?l():d())},h=(e,t)=>{if(!(e instanceof HTMLElement&&t))return;const s=e.querySelector(".shot-caption span"),o=e.querySelector(".shot-caption em"),a=e.querySelector(".shot-image");if(s&&(s.textContent=t.label||""),o&&(o.textContent=t.meta||""),a instanceof HTMLImageElement){const s=a.getAttribute("src")||"",o=a.getAttribute("srcset")||"";s===t.src&&o===t.srcset||(e.classList.remove("is-loaded","is-missing"),a.setAttribute("src",t.src),t.srcset?a.setAttribute("srcset",t.srcset):a.removeAttribute("srcset")),a.setAttribute("alt",t.alt||t.label||n.imgAlt),a.complete&&(a.naturalWidth>0&&a.naturalHeight>0?(e.classList.add("is-loaded"),e.classList.remove("is-missing")):(e.classList.add("is-missing"),e.classList.remove("is-loaded")))}},g=()=>{e.forEach((e,t)=>{if(!(e instanceof HTMLElement))return;const o=a[t];if(!o)return e.hidden=!0,void e.removeAttribute("data-slide-index");e.hidden=!1,e.dataset.slideIndex=String(t);const r=t===s;e.setAttribute("aria-pressed",String(r)),e.setAttribute("aria-label",`${n.showScreen}: ${o.label||""}`),h(e,o)})},S=()=>{c.forEach((e,t)=>{const n=t===s;e.classList.toggle("is-active",n),e.setAttribute("aria-current",n?"true":"false")})},M=()=>{j&&(j.textContent=`${s+1} / ${a.length}`)},I=()=>{if(s<0)return;const n=e[s];n instanceof HTMLElement&&n.scrollIntoView({block:"nearest",inline:"center",behavior:t?"auto":"smooth"})},x=document.querySelector(".hero-copy"),H=()=>{clearTimeout(i),i=0,y.classList.remove("is-transitioning","is-entering"),x&&x.classList.remove("is-copy-transitioning","is-copy-entering")},C=(e,n={})=>{const o=!1!==n.scrollThumb,r=s;s=(e%a.length+a.length)%a.length;const c=a[s];if(!c)return;const l=!1===n.scrollThumb&&0===r,d=r===s;if(H(),t||l||d)return m(c),u(c),g(),S(),M(),void(o&&I());y.classList.add("is-transitioning"),x&&x.classList.add("is-copy-transitioning"),g(),S(),M(),o&&I(),i=setTimeout(()=>{i=0,m(c),u(c),y.classList.remove("is-transitioning"),y.classList.add("is-entering"),x&&(x.classList.remove("is-copy-transitioning"),x.classList.add("is-copy-entering"));const e=()=>{y.classList.remove("is-entering"),y.removeEventListener("animationend",e)};y.addEventListener("animationend",e),x&&setTimeout(()=>x.classList.remove("is-copy-entering"),350)},300)};e.forEach((e,t)=>{e instanceof HTMLElement&&(e.setAttribute("role","button"),e.setAttribute("tabindex","0"),e.addEventListener("click",()=>{const t=Number.parseInt(e.dataset.slideIndex||"",10);Number.isNaN(t)||C(t)}),e.addEventListener("keydown",t=>{if("Enter"!==t.key&&" "!==t.key)return;t.preventDefault();const n=Number.parseInt(e.dataset.slideIndex||"",10);Number.isNaN(n)||C(n)}))}),a.forEach((e,t)=>{const s=document.createElement("button");s.type="button",s.className="showcase-dot",s.setAttribute("aria-label",`${n.showScreen}: ${e.label}`),s.title=e.label,s.addEventListener("click",()=>C(t)),A.appendChild(s),c.push(s)}),z instanceof HTMLButtonElement&&z.addEventListener("click",()=>C(s-1)),T instanceof HTMLButtonElement&&T.addEventListener("click",()=>C(s+1)),p.addEventListener("keydown",e=>{"ArrowLeft"===e.key&&(e.preventDefault(),C(s-1)),"ArrowRight"===e.key&&(e.preventDefault(),C(s+1))});let q=0,N=0,O=!1;y.addEventListener("touchstart",e=>{1===e.touches.length&&(q=e.touches[0].clientX,N=e.touches[0].clientY,O=!0)},{passive:!0}),y.addEventListener("touchmove",e=>{if(!O||1!==e.touches.length)return;const t=e.touches[0].clientX-q,n=e.touches[0].clientY-N;Math.abs(n)>Math.abs(t)&&(O=!1)},{passive:!0}),y.addEventListener("touchend",e=>{if(!O)return;O=!1;const t=(e.changedTouches[0]||{}).clientX-q;Math.abs(t)<40||C(t<0?s+1:s-1)},{passive:!0}),C(0,{scrollThumb:!1})}}const S=document.getElementById("betaForm"),M=document.getElementById("betaFormFeedback");if(S&&S instanceof HTMLFormElement){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,t=["name","email","role","consent"].map(e=>S.elements.namedItem(e)).filter(e=>e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement),s=n.fieldMessages,o=e=>e.name?S.querySelector(`[data-field-error-for="${e.name}"]`):null,a=(e,t,n)=>{if(!(t instanceof HTMLElement&&t.id))return;const s=(e.getAttribute("aria-describedby")||"").split(/\s+/).filter(Boolean),o=new Set(s);n&&o.add(t.id),n||o.delete(t.id),o.size?e.setAttribute("aria-describedby",Array.from(o).join(" ")):e.removeAttribute("aria-describedby")},r=e=>{const t=o(e);e.removeAttribute("aria-invalid");const n=e.closest("label");n&&n.classList.remove("has-error"),t instanceof HTMLElement&&(t.textContent="",a(e,t,!1))},i=(e,t)=>{const n=o(e);e.setAttribute("aria-invalid","true");const s=e.closest("label");s&&s.classList.add("has-error"),n instanceof HTMLElement&&(n.textContent=t,a(e,n,!0))},c=t=>{r(t);const n=t.name;if("name"===n)return!!String(t.value||"").trim()||(i(t,s.name),!1);if("email"===n){const n=String(t.value||"").trim();return!!e.test(n)||(i(t,s.email),!1)}return"role"===n?!!String(t.value||"").trim()||(i(t,s.role),!1):!("consent"===n&&t instanceof HTMLInputElement)||(!!t.checked||(i(t,s.consent),!1))},l=()=>{let e=null;return t.forEach(t=>{c(t)||e||(e=t)}),{ok:!e,firstInvalid:e}};t.forEach(e=>{const t=()=>{((e instanceof HTMLInputElement&&"checkbox"===e.type?e.checked:String(e.value||"").trim().length>0)||"true"===e.getAttribute("aria-invalid"))&&c(e)};e.addEventListener("blur",t),e.addEventListener("change",t),e instanceof HTMLInputElement&&"checkbox"===e.type||e.addEventListener("input",t)}),M instanceof HTMLElement&&M.setAttribute("tabindex","-1"),S.addEventListener("submit",async e=>{if(e.preventDefault(),!(M instanceof HTMLElement))return;M.classList.remove("is-error","is-success"),M.textContent="";const s=l();if(!s.ok)return M.textContent=n.formError,M.classList.add("is-error"),void(s.firstInvalid instanceof HTMLElement&&s.firstInvalid.focus());const o=new FormData(S),a=S.querySelector('button[type="submit"]'),i=a?a.textContent:"";S.setAttribute("aria-busy","true"),a instanceof HTMLButtonElement&&(a.disabled=!0,a.textContent=n.formSending);try{o.set("source","timeflow_landing"),o.set("submitted_at_iso",(new Date).toISOString());const e=await fetch(S.action||"./form-handler.php",{method:"POST",body:o,headers:{Accept:"application/json"}});let s=null;try{s=await e.json()}catch{s=null}if(!e.ok||!s||!0!==s.ok)throw new Error(s&&"string"==typeof s.message&&s.message||n.formConnError);M.textContent=s.message||n.formSuccess,M.classList.add("is-success"),S.reset(),t.forEach(e=>r(e)),M.focus({preventScroll:!0})}catch(e){M.textContent=e instanceof Error&&e.message?e.message:n.formConnError,M.classList.add("is-error")}finally{S.removeAttribute("aria-busy"),a instanceof HTMLButtonElement&&(a.disabled=!1,a.textContent=i||"Wyślij zgłoszenie")}})}(window.requestIdleCallback||requestAnimationFrame)(()=>(e=>{if(!(e instanceof Node))return;const t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT),n=[];for(let e=t.nextNode();e;e=t.nextNode()){if(!(e instanceof Text))continue;if(!e.nodeValue||!e.nodeValue.includes("TIMEFLOW"))continue;const t=e.parentElement;if(!t)continue;if(t.closest(".tf-style"))continue;if(t.closest("script, style, noscript, textarea, option"))continue;const o=e.nodeValue,a=s(o);a!==o&&n.push({node:e,html:a})}for(const{node:e,html:t}of n){const n=document.createElement("template");n.innerHTML=t,e.replaceWith(n.content)}})(document.body));const I=(...e)=>{"function"==typeof gtag&&gtag(...e)};S&&S.addEventListener("submit",()=>{const e=S.elements.namedItem("role");I("event","generate_lead",{event_category:"beta_signup",event_label:e instanceof HTMLSelectElement&&e.value||"unknown"})}),document.querySelectorAll('a[href="#beta"]').forEach(e=>{e.addEventListener("click",()=>{I("event","click_cta_beta",{event_category:"engagement",event_label:e.textContent.trim()})})}),document.querySelectorAll(".faq-item").forEach(e=>{e.addEventListener("toggle",()=>{if(e instanceof HTMLDetailsElement&&e.open){const t=e.querySelector("summary");I("event","faq_expand",{event_category:"engagement",event_label:t?t.textContent.trim().slice(0,80):""})}})}),document.querySelectorAll(".lang-link").forEach(e=>{e.addEventListener("click",()=>{I("event","language_switch",{event_category:"engagement",event_label:e.getAttribute("hreflang")||e.textContent.trim()})})});const x=new Set;window.addEventListener("scroll",()=>{const e=Math.round((window.scrollY+window.innerHeight)/document.documentElement.scrollHeight*100);[25,50,75,100].forEach(t=>{e>=t&&!x.has(t)&&(x.add(t),I("event","scroll_depth",{event_category:"engagement",event_label:t+"%",value:t}))})},{passive:!0});const H=document.querySelectorAll("section[id]");if(H.length&&"IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(I("event","section_view",{event_category:"engagement",event_label:t.target.id}),e.unobserve(t.target))})},{threshold:.3});H.forEach(t=>e.observe(t))}})();