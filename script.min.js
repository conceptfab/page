(()=>{const e=/\bTIMEFLOW\b/g,t=t=>String(t??"").replace(e,'<span class="tf-style">TIMEFLOW</span>'),n=(e,n)=>{e instanceof HTMLElement&&(e.innerHTML=t(n))},a=document.getElementById("year");a&&(a.textContent=String((new Date).getFullYear()));const o=document.querySelector(".topbar");if(o instanceof HTMLElement){const e=()=>{o.classList.toggle("is-scrolled",window.scrollY>12)};e(),window.addEventListener("scroll",e,{passive:!0})}const s=document.querySelector("[data-menu-toggle]"),r=document.querySelector(".topnav");if(o instanceof HTMLElement&&s instanceof HTMLButtonElement&&r instanceof HTMLElement){const e=window.matchMedia("(max-width: 960px)");let t=!1;const n=()=>{o.classList.toggle("has-mobile-menu",e.matches),!e.matches&&t&&a(!1)},a=e=>{t=Boolean(e),o.classList.toggle("is-menu-open",t),s.setAttribute("aria-expanded",String(t)),s.setAttribute("aria-label",t?"Zamknij menu":"Otwórz menu")};s.addEventListener("click",()=>{e.matches&&a(!t)}),r.addEventListener("click",t=>{if(!e.matches)return;const n=t.target;n instanceof Element&&n.closest("a")&&a(!1)}),document.addEventListener("keydown",e=>{"Escape"===e.key&&t&&(a(!1),s.focus())}),document.addEventListener("click",n=>{if(!e.matches||!t)return;const s=n.target;s instanceof Node&&(o.contains(s)||a(!1))}),n(),"function"==typeof e.addEventListener?e.addEventListener("change",n):"function"==typeof e.addListener&&e.addListener(n)}const i=Array.from(document.querySelectorAll("[data-reveal]"));for(const e of i){const t=Number(e.getAttribute("data-delay")||"0");e.style.setProperty("--reveal-delay",String(t))}if("IntersectionObserver"in window){const e=new IntersectionObserver((e,t)=>{for(const n of e)n.isIntersecting&&(n.target.classList.add("is-visible"),t.unobserve(n.target))},{threshold:.14,rootMargin:"0px 0px -30px 0px"});i.forEach(t=>e.observe(t))}else i.forEach(e=>e.classList.add("is-visible"));const c=document.getElementById("heroRoleRotator"),l=["grafików","UI/UX designerów","motion designerów","freelancerów dev","małych studiów"];let d=0;c&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches&&window.setInterval(()=>{d=(d+1)%l.length,c.textContent=l[d]},2400);const u=Array.from(document.querySelectorAll("[data-counter]")),m=e=>{const t=Number(e.getAttribute("data-counter")||"0"),n=Number(e.textContent||"0");if(!Number.isFinite(t))return;if(Number.isFinite(n)&&n===t)return void(e.textContent=String(t));const a=performance.now(),o=s=>{const r=Math.min(1,(s-a)/1200),i=1-Math.pow(1-r,3),c=Number.isFinite(n)?n:0;e.textContent=String(Math.round(c+(t-c)*i)),r<1&&requestAnimationFrame(o)};requestAnimationFrame(o)};if(u.length)if("IntersectionObserver"in window){const e=new IntersectionObserver((e,t)=>{for(const n of e){if(!n.isIntersecting)continue;n.target.querySelectorAll("[data-counter]").forEach(e=>{"1"!==e.dataset.animated&&(e.dataset.animated="1",m(e))}),t.unobserve(n.target)}},{threshold:.5});document.querySelectorAll("[data-counter-card]").forEach(t=>e.observe(t))}else u.forEach(e=>m(e));Array.from(document.querySelectorAll("[data-shot-card]")).forEach(e=>{const t=e.querySelector(".shot-image");if(!(t instanceof HTMLImageElement))return;const n=()=>{e.classList.add("is-loaded"),e.classList.remove("is-missing")},a=()=>{e.classList.add("is-missing"),e.classList.remove("is-loaded")};t.addEventListener("load",n,{once:!0}),t.addEventListener("error",a,{once:!0}),t.complete&&(t.naturalWidth>0&&t.naturalHeight>0?n():a())});const y=document.querySelector("[data-hero-slider]"),p=document.querySelector("[data-hero-slider-stage]"),h=document.getElementById("heroShotImage"),g=document.getElementById("heroShotCaptionLabel"),f=document.getElementById("heroShotCaptionMeta"),w=document.getElementById("heroHeadline"),b=document.getElementById("heroLead"),E=document.getElementById("showcaseHeadline"),k=document.getElementById("showcaseNote"),L=document.querySelector("[data-hero-slider-prev]"),v=document.querySelector("[data-hero-slider-next]"),z=document.querySelector("[data-hero-slider-dots]"),T=document.querySelector("[data-hero-slider-counter]");if(y&&p instanceof HTMLElement&&h instanceof HTMLImageElement&&g&&f&&w&&b&&E&&k&&z){const e=Array.from(document.querySelectorAll(".shot-rail [data-hero-slide-source]")),t=e=>{const t=e.querySelector(".shot-caption span"),n=e.querySelector(".shot-caption em"),a=e.querySelector(".shot-image");return{label:t?t.textContent.trim():"",meta:n?n.textContent.trim():"",src:a instanceof HTMLImageElement&&a.getAttribute("src")||"",alt:a instanceof HTMLImageElement&&a.getAttribute("alt")||""}},a=e.map(t).filter(e=>e.src),o={Dashboard:{heroTitle:"Kontroluj czas pracy",heroAccent:"bez zabijania flow.",heroLead:"TIMEFLOW automatycznie zbiera dane, porządkuje sesje i pomaga przypisać czas do projektów. Dziś: tracking + analityka + AI sugestie + import/export + sync MVP. Jutro: pełny menedżer projektów z customowym drzewem folderów.",showcaseTitle:"Dashboard, projekty, sesje i analityka w jednym workflow",showcaseNote:"Główny widok pokazuje dashboard pracy. Poniżej najważniejsze moduły, które budują codzienny workflow freelancera: Projects, Sessions, Analysis, Estimates i AI."},Projects:{heroTitle:"Uporządkuj projekty",heroAccent:"i foldery bez chaosu.",heroLead:"Buduj strukturę klientów i projektów, przypisuj aplikacje, sesje i statusy. TIMEFLOW pomaga przejść od surowego trackingu do realnego porządku pracy.",showcaseTitle:"Projects: foldery, statusy i szybkie przypisania",showcaseNote:"Widok Projects porządkuje strukturę pracy freelancera i studia. Możesz budować drzewo, oznaczać statusy oraz szybciej mapować sesje do projektów."},Sessions:{heroTitle:"Czyść i przypisuj sesje",heroAccent:"w kilka sekund.",heroLead:"Grupowanie sesji, szybkie korekty i sugestie AI skracają czas ręcznego porządkowania dnia pracy. Mniej klikania, więcej realnej pracy.",showcaseTitle:"Sessions: dzienne sesje, grupowanie i przypisania",showcaseNote:"Zobacz surowe wpisy i uporządkuj je w workflow projektowy. TIMEFLOW wspiera ręczne poprawki oraz sugestie przypisań na podstawie historii pracy."},"Time Analysis":{heroTitle:"Zobacz gdzie znika czas",heroAccent:"i kiedy masz peak flow.",heroLead:"Wykresy i heatmapa pomagają znaleźć powtarzalne wzorce pracy. Dzięki temu łatwiej planować bloki fokusowe, wyceny i realne deadline'y.",showcaseTitle:"Time Analysis: wykresy, heatmapa i wzorce pracy",showcaseNote:"Analityka pokazuje nie tylko sumy godzin, ale też rytm dnia i tygodnia. To pomaga podejmować lepsze decyzje o planowaniu i wycenie."},Estimates:{heroTitle:"Wyceniaj na podstawie danych",heroAccent:"zamiast zgadywać.",heroLead:"Moduł Estimates łączy realny czas pracy ze stawkami i mnożnikami. Szybciej tworzysz spójne wyceny i lepiej pilnujesz rentowności projektów.",showcaseTitle:"Estimates: stawki, mnożniki i wyceny projektów",showcaseNote:"Wyceny bazują na rzeczywistym czasie, nie tylko intuicji. To pomaga utrzymać spójność ofert i lepiej rozmawiać z klientem o zakresie pracy."},"AI & Model":{heroTitle:"AI sugeruje przypisania",heroAccent:"Ty zachowujesz kontrolę.",heroLead:"Tryby suggest i auto_safe pomagają automatyzować przypisania bez utraty kontroli nad danymi. Możesz trenować model i cofnąć ostatnią paczkę zmian.",showcaseTitle:"AI & Model: sugestie, progi i trening modelu",showcaseNote:"Panel AI pokazuje tryby pracy, progi pewności i status modelu. To warstwa automatyzacji, która ma przyspieszać workflow, a nie go komplikować."}};if(a.length){const t=window.matchMedia("(prefers-reduced-motion: reduce)").matches;let s=0;const r=[],i=()=>{p.classList.add("is-loaded"),p.classList.remove("is-missing")},c=()=>{p.classList.add("is-missing"),p.classList.remove("is-loaded")};h.addEventListener("load",i),h.addEventListener("error",c);const l=e=>{const t=o[e.label]||o.Dashboard;w.innerHTML=`${t.heroTitle} <span>${t.heroAccent}</span>`,n(b,t.heroLead),n(E,t.showcaseTitle),n(k,t.showcaseNote)},d=e=>{g.textContent=e.label||"",f.textContent=e.meta||"";(h.getAttribute("src")||"")!==e.src&&(p.classList.remove("is-loaded","is-missing"),h.setAttribute("src",e.src)),h.setAttribute("alt",e.alt||e.label||"Zrzut ekranu TIMEFLOW"),h.complete&&(h.naturalWidth>0&&h.naturalHeight>0?i():c())},u=(e,t)=>{if(!(e instanceof HTMLElement&&t))return;const n=e.querySelector(".shot-caption span"),a=e.querySelector(".shot-caption em"),o=e.querySelector(".shot-image");if(n&&(n.textContent=t.label||""),a&&(a.textContent=t.meta||""),o instanceof HTMLImageElement){(o.getAttribute("src")||"")!==t.src&&(e.classList.remove("is-loaded","is-missing"),o.setAttribute("src",t.src)),o.setAttribute("alt",t.alt||t.label||"Zrzut ekranu TIMEFLOW"),o.complete&&(o.naturalWidth>0&&o.naturalHeight>0?(e.classList.add("is-loaded"),e.classList.remove("is-missing")):(e.classList.add("is-missing"),e.classList.remove("is-loaded")))}},m=()=>{e.forEach((e,t)=>{if(!(e instanceof HTMLElement))return;const n=a[t];if(!n)return e.hidden=!0,void e.removeAttribute("data-slide-index");e.hidden=!1,e.dataset.slideIndex=String(t);const o=t===s;e.classList.toggle("is-active",o),e.setAttribute("aria-pressed",String(o)),e.setAttribute("aria-label",`Pokaż screen: ${n.label||"widok"}`),u(e,n)})},j=()=>{r.forEach((e,t)=>{const n=t===s;e.classList.toggle("is-active",n),e.setAttribute("aria-current",n?"true":"false")})},A=()=>{T&&(T.textContent=`${s+1} / ${a.length}`)},M=()=>{if(s<0)return;const n=e[s];n instanceof HTMLElement&&n.scrollIntoView({block:"nearest",inline:"center",behavior:t?"auto":"smooth"})},I=(e,t={})=>{const n=!1!==t.scrollThumb,q=s;s=(e%a.length+a.length)%a.length;const o=a[s];if(!o)return;const F=!1===t.scrollThumb&&0===q,G=q===s,H=document.querySelector(".hero-copy");if(window.matchMedia("(prefers-reduced-motion: reduce)").matches||F||G){d(o),l(o),m(),j(),A(),n&&M();return}p.classList.add("is-transitioning"),p.classList.remove("is-entering"),H&&H.classList.add("is-copy-transitioning"),m(),j(),A(),n&&M(),setTimeout(()=>{d(o),l(o),p.classList.remove("is-transitioning"),p.classList.add("is-entering"),H&&(H.classList.remove("is-copy-transitioning"),H.classList.add("is-copy-entering"));const e=()=>{p.classList.remove("is-entering"),p.removeEventListener("animationend",e)};p.addEventListener("animationend",e),H&&setTimeout(()=>H.classList.remove("is-copy-entering"),350)},300)};e.forEach((e,t)=>{e instanceof HTMLElement&&(e.setAttribute("role","button"),e.setAttribute("tabindex","0"),e.addEventListener("click",()=>{const t=Number.parseInt(e.dataset.slideIndex||"",10);Number.isNaN(t)||I(t)}),e.addEventListener("keydown",t=>{if("Enter"!==t.key&&" "!==t.key)return;t.preventDefault();const n=Number.parseInt(e.dataset.slideIndex||"",10);Number.isNaN(n)||I(n)}))}),a.forEach((e,t)=>{const n=document.createElement("button");n.type="button",n.className="showcase-dot",n.setAttribute("aria-label",`Pokaż screen: ${e.label}`),n.title=e.label,n.addEventListener("click",()=>I(t)),z.appendChild(n),r.push(n)}),L instanceof HTMLButtonElement&&L.addEventListener("click",()=>I(s-1)),v instanceof HTMLButtonElement&&v.addEventListener("click",()=>I(s+1)),y.addEventListener("keydown",e=>{"ArrowLeft"===e.key&&(e.preventDefault(),I(s-1)),"ArrowRight"===e.key&&(e.preventDefault(),I(s+1))}),I(0,{scrollThumb:!1})}}const j=document.getElementById("betaForm"),A=document.getElementById("betaFormFeedback");if(j&&j instanceof HTMLFormElement){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,t=["name","email","role","consent"].map(e=>j.elements.namedItem(e)).filter(e=>e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement),n={name:"Podaj imię lub nick.",email:"Podaj poprawny adres e-mail.",role:"Wybierz branżę.",consent:"Zaznacz zgodę na kontakt w sprawie testów beta."},a=e=>e.name?j.querySelector(`[data-field-error-for="${e.name}"]`):null,o=(e,t,n)=>{if(!(t instanceof HTMLElement&&t.id))return;const a=(e.getAttribute("aria-describedby")||"").split(/\s+/).filter(Boolean),o=new Set(a);n&&o.add(t.id),n||o.delete(t.id),o.size?e.setAttribute("aria-describedby",Array.from(o).join(" ")):e.removeAttribute("aria-describedby")},s=e=>{const t=a(e);e.removeAttribute("aria-invalid");const n=e.closest("label");n&&n.classList.remove("has-error"),t instanceof HTMLElement&&(t.textContent="",o(e,t,!1))},r=(e,t)=>{const n=a(e);e.setAttribute("aria-invalid","true");const s=e.closest("label");s&&s.classList.add("has-error"),n instanceof HTMLElement&&(n.textContent=t,o(e,n,!0))},i=t=>{s(t);const a=t.name;if("name"===a)return!!String(t.value||"").trim()||(r(t,n.name),!1);if("email"===a){const a=String(t.value||"").trim();return!!e.test(a)||(r(t,n.email),!1)}return"role"===a?!!String(t.value||"").trim()||(r(t,n.role),!1):!("consent"===a&&t instanceof HTMLInputElement)||(!!t.checked||(r(t,n.consent),!1))},c=()=>{let e=null;return t.forEach(t=>{i(t)||e||(e=t)}),{ok:!e,firstInvalid:e}};t.forEach(e=>{const t=()=>{((e instanceof HTMLInputElement&&"checkbox"===e.type?e.checked:String(e.value||"").trim().length>0)||"true"===e.getAttribute("aria-invalid"))&&i(e)};e.addEventListener("blur",t),e.addEventListener("change",t),e instanceof HTMLInputElement&&"checkbox"===e.type||e.addEventListener("input",t)}),A instanceof HTMLElement&&A.setAttribute("tabindex","-1"),j.addEventListener("submit",async e=>{if(e.preventDefault(),!(A instanceof HTMLElement))return;A.classList.remove("is-error","is-success"),A.textContent="";const n=c();if(!n.ok)return A.textContent="Popraw oznaczone pola i spróbuj ponownie.",A.classList.add("is-error"),void(n.firstInvalid instanceof HTMLElement&&n.firstInvalid.focus());const a=new FormData(j),o=j.querySelector('button[type="submit"]'),r=o?o.textContent:"";j.setAttribute("aria-busy","true"),o instanceof HTMLButtonElement&&(o.disabled=!0,o.textContent="Wysyłanie…");try{a.set("source","timeflow_landing"),a.set("submitted_at_iso",(new Date).toISOString());const e=await fetch(j.action||"./form-handler.php",{method:"POST",body:a,headers:{Accept:"application/json"}});let n=null;try{n=await e.json()}catch{n=null}if(!e.ok||!n||!0!==n.ok)throw new Error(n&&"string"==typeof n.message&&n.message||"Nie udało się wysłać formularza.");A.textContent=n.message||"Dziękujemy. Zgłoszenie zostało zapisane.",A.classList.add("is-success"),j.reset(),t.forEach(e=>s(e)),A.focus({preventScroll:!0})}catch(e){A.textContent=e instanceof Error&&e.message?e.message:"Błąd połączenia. Spróbuj ponownie za chwilę.",A.classList.add("is-error")}finally{j.removeAttribute("aria-busy"),o instanceof HTMLButtonElement&&(o.disabled=!1,o.textContent=r||"Wyślij zgłoszenie")}})}(window.requestIdleCallback||requestAnimationFrame)(()=>(e=>{if(!(e instanceof Node))return;const n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT),a=[];for(let e=n.nextNode();e;e=n.nextNode()){if(!(e instanceof Text))continue;if(!e.nodeValue||!e.nodeValue.includes("TIMEFLOW"))continue;const n=e.parentElement;if(!n)continue;if(n.closest(".tf-style"))continue;if(n.closest("script, style, noscript, textarea, option"))continue;const o=e.nodeValue,s=t(o);s!==o&&a.push({node:e,html:s})}for(const{node:e,html:t}of a){const n=document.createElement("template");n.innerHTML=t,e.replaceWith(n.content)}})(document.body));const M=(...e)=>{"function"==typeof gtag&&gtag(...e)};j&&j.addEventListener("submit",()=>{const e=j.elements.namedItem("role");M("event","generate_lead",{event_category:"beta_signup",event_label:e instanceof HTMLSelectElement&&e.value||"unknown"})}),document.querySelectorAll('a[href="#beta"]').forEach(e=>{e.addEventListener("click",()=>{M("event","click_cta_beta",{event_category:"engagement",event_label:e.textContent.trim()})})}),document.querySelectorAll(".faq-item").forEach(e=>{e.addEventListener("toggle",()=>{if(e instanceof HTMLDetailsElement&&e.open){const t=e.querySelector("summary");M("event","faq_expand",{event_category:"engagement",event_label:t?t.textContent.trim().slice(0,80):""})}})}),document.querySelectorAll(".lang-link").forEach(e=>{e.addEventListener("click",()=>{M("event","language_switch",{event_category:"engagement",event_label:e.getAttribute("hreflang")||e.textContent.trim()})})});const I=new Set;window.addEventListener("scroll",()=>{const e=Math.round((window.scrollY+window.innerHeight)/document.documentElement.scrollHeight*100);[25,50,75,100].forEach(t=>{e>=t&&!I.has(t)&&(I.add(t),M("event","scroll_depth",{event_category:"engagement",event_label:t+"%",value:t}))})},{passive:!0});const S=document.querySelectorAll("section[id]");if(S.length&&"IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(M("event","section_view",{event_category:"engagement",event_label:t.target.id}),e.unobserve(t.target))})},{threshold:.3});S.forEach(t=>e.observe(t))}})();