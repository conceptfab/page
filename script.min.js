(()=>{const e=/\bTIMEFLOW\b/g,t=t=>String(t??"").replace(e,'<span class="tf-style">TIMEFLOW</span>'),n=(e,n)=>{e instanceof HTMLElement&&(e.innerHTML=t(n))},s=document.getElementById("year");s&&(s.textContent=String((new Date).getFullYear()));const a=document.querySelector(".topbar");if(a instanceof HTMLElement){const e=()=>{a.classList.toggle("is-scrolled",window.scrollY>12)};e(),window.addEventListener("scroll",e,{passive:!0})}const o=document.querySelector("[data-menu-toggle]"),r=document.querySelector(".topnav");if(a instanceof HTMLElement&&o instanceof HTMLButtonElement&&r instanceof HTMLElement){const e=window.matchMedia("(max-width: 960px)");let t=!1;const n=()=>{a.classList.toggle("has-mobile-menu",e.matches),!e.matches&&t&&s(!1)},s=e=>{t=Boolean(e),a.classList.toggle("is-menu-open",t),o.setAttribute("aria-expanded",String(t)),o.setAttribute("aria-label",t?"Zamknij menu":"Otwórz menu")};o.addEventListener("click",()=>{e.matches&&s(!t)}),r.addEventListener("click",t=>{if(!e.matches)return;const n=t.target;n instanceof Element&&n.closest("a")&&s(!1)}),document.addEventListener("keydown",e=>{"Escape"===e.key&&t&&(s(!1),o.focus())}),document.addEventListener("click",n=>{if(!e.matches||!t)return;const o=n.target;o instanceof Node&&(a.contains(o)||s(!1))}),n(),"function"==typeof e.addEventListener?e.addEventListener("change",n):"function"==typeof e.addListener&&e.addListener(n)}const i=Array.from(document.querySelectorAll("[data-reveal]"));for(const e of i){const t=Number(e.getAttribute("data-delay")||"0");e.style.setProperty("--reveal-delay",String(t))}if("IntersectionObserver"in window){const e=new IntersectionObserver((e,t)=>{for(const n of e)n.isIntersecting&&(n.target.classList.add("is-visible"),t.unobserve(n.target))},{threshold:.14,rootMargin:"0px 0px -30px 0px"});i.forEach(t=>e.observe(t))}else i.forEach(e=>e.classList.add("is-visible"));const c=document.getElementById("heroRoleRotator"),l=["grafików","UI/UX designerów","motion designerów","freelancerów dev","małych studiów"];let d=0;c&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches&&window.setInterval(()=>{d=(d+1)%l.length,c.textContent=l[d]},2400);const u=Array.from(document.querySelectorAll("[data-counter]")),m=e=>{const t=Number(e.getAttribute("data-counter")||"0"),n=Number(e.textContent||"0");if(!Number.isFinite(t))return;if(Number.isFinite(n)&&n===t)return void(e.textContent=String(t));const s=performance.now(),a=o=>{const r=Math.min(1,(o-s)/1200),i=1-Math.pow(1-r,3),c=Number.isFinite(n)?n:0;e.textContent=String(Math.round(c+(t-c)*i)),r<1&&requestAnimationFrame(a)};requestAnimationFrame(a)};if(u.length)if("IntersectionObserver"in window){const e=new IntersectionObserver((e,t)=>{for(const n of e){if(!n.isIntersecting)continue;n.target.querySelectorAll("[data-counter]").forEach(e=>{"1"!==e.dataset.animated&&(e.dataset.animated="1",m(e))}),t.unobserve(n.target)}},{threshold:.5});document.querySelectorAll("[data-counter-card]").forEach(t=>e.observe(t))}else u.forEach(e=>m(e));Array.from(document.querySelectorAll("[data-shot-card]")).forEach(e=>{const t=e.querySelector(".shot-image");if(!(t instanceof HTMLImageElement))return;const n=()=>{e.classList.add("is-loaded"),e.classList.remove("is-missing")},s=()=>{e.classList.add("is-missing"),e.classList.remove("is-loaded")};t.addEventListener("load",n,{once:!0}),t.addEventListener("error",s,{once:!0}),t.complete&&(t.naturalWidth>0&&t.naturalHeight>0?n():s())});const y=document.querySelector("[data-hero-slider]"),h=document.querySelector("[data-hero-slider-stage]"),p=document.getElementById("heroShotImage"),g=document.getElementById("heroShotCaptionLabel"),f=document.getElementById("heroShotCaptionMeta"),b=document.getElementById("heroHeadline"),w=document.getElementById("heroLead"),L=document.getElementById("showcaseHeadline"),v=document.getElementById("showcaseNote"),E=document.querySelector("[data-hero-slider-prev]"),k=document.querySelector("[data-hero-slider-next]"),z=document.querySelector("[data-hero-slider-dots]"),T=document.querySelector("[data-hero-slider-counter]");if(y&&h instanceof HTMLElement&&p instanceof HTMLImageElement&&g&&f&&b&&w&&L&&v&&z){const e=Array.from(document.querySelectorAll(".shot-rail [data-hero-slide-source]")),t=e=>{const t=e.querySelector(".shot-caption span"),n=e.querySelector(".shot-caption em"),s=e.querySelector(".shot-image");return{label:t?t.textContent.trim():"",meta:n?n.textContent.trim():"",src:s instanceof HTMLImageElement&&s.getAttribute("src")||"",srcset:s instanceof HTMLImageElement&&s.getAttribute("srcset")||"",alt:s instanceof HTMLImageElement&&s.getAttribute("alt")||""}},s=e.map(t).filter(e=>e.src),a={Dashboard:{heroTitle:"Kontroluj czas pracy",heroAccent:"bez zabijania flow.",heroLead:"TIMEFLOW automatycznie zbiera dane, porządkuje sesje i pomaga przypisać czas do projektów. Dziś: tracking + analityka + AI sugestie + import/export + sync MVP. Jutro: pełny menedżer projektów z customowym drzewem folderów.",showcaseTitle:"Dashboard, projekty, sesje i analityka w jednym workflow",showcaseNote:"Główny widok pokazuje dashboard pracy. Poniżej najważniejsze moduły, które budują codzienny workflow freelancera: Projects, Sessions, Analysis, Estimates i AI."},Projects:{heroTitle:"Uporządkuj projekty",heroAccent:"i foldery bez chaosu.",heroLead:"Buduj strukturę klientów i projektów, przypisuj aplikacje, sesje i statusy. TIMEFLOW pomaga przejść od surowego trackingu do realnego porządku pracy.",showcaseTitle:"Projects: foldery, statusy i szybkie przypisania",showcaseNote:"Widok Projects porządkuje strukturę pracy freelancera i studia. Możesz budować drzewo, oznaczać statusy oraz szybciej mapować sesje do projektów."},Sessions:{heroTitle:"Czyść i przypisuj sesje",heroAccent:"w kilka sekund.",heroLead:"Grupowanie sesji, szybkie korekty i sugestie AI skracają czas ręcznego porządkowania dnia pracy. Mniej klikania, więcej realnej pracy.",showcaseTitle:"Sessions: dzienne sesje, grupowanie i przypisania",showcaseNote:"Zobacz surowe wpisy i uporządkuj je w workflow projektowy. TIMEFLOW wspiera ręczne poprawki oraz sugestie przypisań na podstawie historii pracy."},"Time Analysis":{heroTitle:"Zobacz gdzie znika czas",heroAccent:"i kiedy masz peak flow.",heroLead:"Wykresy i heatmapa pomagają znaleźć powtarzalne wzorce pracy. Dzięki temu łatwiej planować bloki fokusowe, wyceny i realne deadline'y.",showcaseTitle:"Time Analysis: wykresy, heatmapa i wzorce pracy",showcaseNote:"Analityka pokazuje nie tylko sumy godzin, ale też rytm dnia i tygodnia. To pomaga podejmować lepsze decyzje o planowaniu i wycenie."},Estimates:{heroTitle:"Wyceniaj na podstawie danych",heroAccent:"zamiast zgadywać.",heroLead:"Moduł Estimates łączy realny czas pracy ze stawkami i mnożnikami. Szybciej tworzysz spójne wyceny i lepiej pilnujesz rentowności projektów.",showcaseTitle:"Estimates: stawki, mnożniki i wyceny projektów",showcaseNote:"Wyceny bazują na rzeczywistym czasie, nie tylko intuicji. To pomaga utrzymać spójność ofert i lepiej rozmawiać z klientem o zakresie pracy."},"AI & Model":{heroTitle:"AI sugeruje przypisania",heroAccent:"Ty zachowujesz kontrolę.",heroLead:"Tryby suggest i auto_safe pomagają automatyzować przypisania bez utraty kontroli nad danymi. Możesz trenować model i cofnąć ostatnią paczkę zmian.",showcaseTitle:"AI & Model: sugestie, progi i trening modelu",showcaseNote:"Panel AI pokazuje tryby pracy, progi pewności i status modelu. To warstwa automatyzacji, która ma przyspieszać workflow, a nie go komplikować."}};if(s.length){const t=window.matchMedia("(prefers-reduced-motion: reduce)").matches;let o=0,r=0;const i=[],c=()=>{h.classList.add("is-loaded"),h.classList.remove("is-missing")},l=()=>{h.classList.add("is-missing"),h.classList.remove("is-loaded")};p.addEventListener("load",c),p.addEventListener("error",l);const d=e=>{const t=a[e.label]||a.Dashboard;b.innerHTML=`${t.heroTitle} <span>${t.heroAccent}</span>`,n(w,t.heroLead),n(L,t.showcaseTitle),n(v,t.showcaseNote)},u=e=>{g.textContent=e.label||"",f.textContent=e.meta||"";const t=p.getAttribute("src")||"",n=p.getAttribute("srcset")||"";t===e.src&&n===e.srcset||(h.classList.remove("is-loaded","is-missing"),p.setAttribute("src",e.src),e.srcset?p.setAttribute("srcset",e.srcset):p.removeAttribute("srcset")),p.setAttribute("alt",e.alt||e.label||"Zrzut ekranu TIMEFLOW"),p.complete&&(p.naturalWidth>0&&p.naturalHeight>0?c():l())},m=(e,t)=>{if(!(e instanceof HTMLElement&&t))return;const n=e.querySelector(".shot-caption span"),s=e.querySelector(".shot-caption em"),a=e.querySelector(".shot-image");if(n&&(n.textContent=t.label||""),s&&(s.textContent=t.meta||""),a instanceof HTMLImageElement){const n=a.getAttribute("src")||"",s=a.getAttribute("srcset")||"";n===t.src&&s===t.srcset||(e.classList.remove("is-loaded","is-missing"),a.setAttribute("src",t.src),t.srcset?a.setAttribute("srcset",t.srcset):a.removeAttribute("srcset")),a.setAttribute("alt",t.alt||t.label||"Zrzut ekranu TIMEFLOW"),a.complete&&(a.naturalWidth>0&&a.naturalHeight>0?(e.classList.add("is-loaded"),e.classList.remove("is-missing")):(e.classList.add("is-missing"),e.classList.remove("is-loaded")))}},A=()=>{e.forEach((e,t)=>{if(!(e instanceof HTMLElement))return;const n=s[t];if(!n)return e.hidden=!0,void e.removeAttribute("data-slide-index");e.hidden=!1,e.dataset.slideIndex=String(t);const a=t===o;e.classList.toggle("is-active",a),e.setAttribute("aria-pressed",String(a)),e.setAttribute("aria-label",`Pokaż screen: ${n.label||"widok"}`),m(e,n)})},j=()=>{i.forEach((e,t)=>{const n=t===o;e.classList.toggle("is-active",n),e.setAttribute("aria-current",n?"true":"false")})},M=()=>{T&&(T.textContent=`${o+1} / ${s.length}`)},I=()=>{if(o<0)return;const n=e[o];n instanceof HTMLElement&&n.scrollIntoView({block:"nearest",inline:"center",behavior:t?"auto":"smooth"})},S=document.querySelector(".hero-copy"),x=()=>{clearTimeout(r),r=0,h.classList.remove("is-transitioning","is-entering"),S&&S.classList.remove("is-copy-transitioning","is-copy-entering")},H=(e,n={})=>{const a=!1!==n.scrollThumb,i=o;o=(e%s.length+s.length)%s.length;const c=s[o];if(!c)return;const l=!1===n.scrollThumb&&0===i,m=i===o;if(x(),t||l||m)return u(c),d(c),A(),j(),M(),void(a&&I());h.classList.add("is-transitioning"),S&&S.classList.add("is-copy-transitioning"),A(),j(),M(),a&&I(),r=setTimeout(()=>{r=0,u(c),d(c),h.classList.remove("is-transitioning"),h.classList.add("is-entering"),S&&(S.classList.remove("is-copy-transitioning"),S.classList.add("is-copy-entering"));const e=()=>{h.classList.remove("is-entering"),h.removeEventListener("animationend",e)};h.addEventListener("animationend",e),S&&setTimeout(()=>S.classList.remove("is-copy-entering"),350)},300)};e.forEach((e,t)=>{e instanceof HTMLElement&&(e.setAttribute("role","button"),e.setAttribute("tabindex","0"),e.addEventListener("click",()=>{const t=Number.parseInt(e.dataset.slideIndex||"",10);Number.isNaN(t)||H(t)}),e.addEventListener("keydown",t=>{if("Enter"!==t.key&&" "!==t.key)return;t.preventDefault();const n=Number.parseInt(e.dataset.slideIndex||"",10);Number.isNaN(n)||H(n)}))}),s.forEach((e,t)=>{const n=document.createElement("button");n.type="button",n.className="showcase-dot",n.setAttribute("aria-label",`Pokaż screen: ${e.label}`),n.title=e.label,n.addEventListener("click",()=>H(t)),z.appendChild(n),i.push(n)}),E instanceof HTMLButtonElement&&E.addEventListener("click",()=>H(o-1)),k instanceof HTMLButtonElement&&k.addEventListener("click",()=>H(o+1)),y.addEventListener("keydown",e=>{"ArrowLeft"===e.key&&(e.preventDefault(),H(o-1)),"ArrowRight"===e.key&&(e.preventDefault(),H(o+1))});let q=0,C=0,N=!1;h.addEventListener("touchstart",e=>{1===e.touches.length&&(q=e.touches[0].clientX,C=e.touches[0].clientY,N=!0)},{passive:!0}),h.addEventListener("touchmove",e=>{if(!N||1!==e.touches.length)return;const t=e.touches[0].clientX-q,n=e.touches[0].clientY-C;Math.abs(n)>Math.abs(t)&&(N=!1)},{passive:!0}),h.addEventListener("touchend",e=>{if(!N)return;N=!1;const t=(e.changedTouches[0]||{}).clientX-q;Math.abs(t)<40||H(t<0?o+1:o-1)},{passive:!0}),H(0,{scrollThumb:!1})}}const A=document.getElementById("betaForm"),j=document.getElementById("betaFormFeedback");if(A&&A instanceof HTMLFormElement){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,t=["name","email","role","consent"].map(e=>A.elements.namedItem(e)).filter(e=>e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement),n={name:"Podaj imię lub nick.",email:"Podaj poprawny adres e-mail.",role:"Wybierz branżę.",consent:"Zaznacz zgodę na kontakt w sprawie testów beta."},s=e=>e.name?A.querySelector(`[data-field-error-for="${e.name}"]`):null,a=(e,t,n)=>{if(!(t instanceof HTMLElement&&t.id))return;const s=(e.getAttribute("aria-describedby")||"").split(/\s+/).filter(Boolean),a=new Set(s);n&&a.add(t.id),n||a.delete(t.id),a.size?e.setAttribute("aria-describedby",Array.from(a).join(" ")):e.removeAttribute("aria-describedby")},o=e=>{const t=s(e);e.removeAttribute("aria-invalid");const n=e.closest("label");n&&n.classList.remove("has-error"),t instanceof HTMLElement&&(t.textContent="",a(e,t,!1))},r=(e,t)=>{const n=s(e);e.setAttribute("aria-invalid","true");const o=e.closest("label");o&&o.classList.add("has-error"),n instanceof HTMLElement&&(n.textContent=t,a(e,n,!0))},i=t=>{o(t);const s=t.name;if("name"===s)return!!String(t.value||"").trim()||(r(t,n.name),!1);if("email"===s){const s=String(t.value||"").trim();return!!e.test(s)||(r(t,n.email),!1)}return"role"===s?!!String(t.value||"").trim()||(r(t,n.role),!1):!("consent"===s&&t instanceof HTMLInputElement)||(!!t.checked||(r(t,n.consent),!1))},c=()=>{let e=null;return t.forEach(t=>{i(t)||e||(e=t)}),{ok:!e,firstInvalid:e}};t.forEach(e=>{const t=()=>{((e instanceof HTMLInputElement&&"checkbox"===e.type?e.checked:String(e.value||"").trim().length>0)||"true"===e.getAttribute("aria-invalid"))&&i(e)};e.addEventListener("blur",t),e.addEventListener("change",t),e instanceof HTMLInputElement&&"checkbox"===e.type||e.addEventListener("input",t)}),j instanceof HTMLElement&&j.setAttribute("tabindex","-1"),A.addEventListener("submit",async e=>{if(e.preventDefault(),!(j instanceof HTMLElement))return;j.classList.remove("is-error","is-success"),j.textContent="";const n=c();if(!n.ok)return j.textContent="Popraw oznaczone pola i spróbuj ponownie.",j.classList.add("is-error"),void(n.firstInvalid instanceof HTMLElement&&n.firstInvalid.focus());const s=new FormData(A),a=A.querySelector('button[type="submit"]'),r=a?a.textContent:"";A.setAttribute("aria-busy","true"),a instanceof HTMLButtonElement&&(a.disabled=!0,a.textContent="Wysyłanie…");try{s.set("source","timeflow_landing"),s.set("submitted_at_iso",(new Date).toISOString());const e=await fetch(A.action||"./form-handler.php",{method:"POST",body:s,headers:{Accept:"application/json"}});let n=null;try{n=await e.json()}catch{n=null}if(!e.ok||!n||!0!==n.ok)throw new Error(n&&"string"==typeof n.message&&n.message||"Nie udało się wysłać formularza.");j.textContent=n.message||"Dziękujemy. Zgłoszenie zostało zapisane.",j.classList.add("is-success"),A.reset(),t.forEach(e=>o(e)),j.focus({preventScroll:!0})}catch(e){j.textContent=e instanceof Error&&e.message?e.message:"Błąd połączenia. Spróbuj ponownie za chwilę.",j.classList.add("is-error")}finally{A.removeAttribute("aria-busy"),a instanceof HTMLButtonElement&&(a.disabled=!1,a.textContent=r||"Wyślij zgłoszenie")}})}(window.requestIdleCallback||requestAnimationFrame)(()=>(e=>{if(!(e instanceof Node))return;const n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT),s=[];for(let e=n.nextNode();e;e=n.nextNode()){if(!(e instanceof Text))continue;if(!e.nodeValue||!e.nodeValue.includes("TIMEFLOW"))continue;const n=e.parentElement;if(!n)continue;if(n.closest(".tf-style"))continue;if(n.closest("script, style, noscript, textarea, option"))continue;const a=e.nodeValue,o=t(a);o!==a&&s.push({node:e,html:o})}for(const{node:e,html:t}of s){const n=document.createElement("template");n.innerHTML=t,e.replaceWith(n.content)}})(document.body));const M=(...e)=>{"function"==typeof gtag&&gtag(...e)};A&&A.addEventListener("submit",()=>{const e=A.elements.namedItem("role");M("event","generate_lead",{event_category:"beta_signup",event_label:e instanceof HTMLSelectElement&&e.value||"unknown"})}),document.querySelectorAll('a[href="#beta"]').forEach(e=>{e.addEventListener("click",()=>{M("event","click_cta_beta",{event_category:"engagement",event_label:e.textContent.trim()})})}),document.querySelectorAll(".faq-item").forEach(e=>{e.addEventListener("toggle",()=>{if(e instanceof HTMLDetailsElement&&e.open){const t=e.querySelector("summary");M("event","faq_expand",{event_category:"engagement",event_label:t?t.textContent.trim().slice(0,80):""})}})}),document.querySelectorAll(".lang-link").forEach(e=>{e.addEventListener("click",()=>{M("event","language_switch",{event_category:"engagement",event_label:e.getAttribute("hreflang")||e.textContent.trim()})})});const I=new Set;window.addEventListener("scroll",()=>{const e=Math.round((window.scrollY+window.innerHeight)/document.documentElement.scrollHeight*100);[25,50,75,100].forEach(t=>{e>=t&&!I.has(t)&&(I.add(t),M("event","scroll_depth",{event_category:"engagement",event_label:t+"%",value:t}))})},{passive:!0});const S=document.querySelectorAll("section[id]");if(S.length&&"IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(M("event","section_view",{event_category:"engagement",event_label:t.target.id}),e.unobserve(t.target))})},{threshold:.3});S.forEach(t=>e.observe(t))}})();